language: python

python:
  - 3.6

sudo: false

before_install:
  - export PYTHONPATH=$HOME/build/icddex/vigilant-pancake/src

install:
  - pip install codacy-coverage coverage
  - pip install pytest
  - pip install -r requirements.txt

script:
  - pytest --cov=./src tests

after_script:
  - coverage xml
  - python-codacy-coverage -r coverage.xml

notifications:
  email:
    on_success: never
    on_failure: always